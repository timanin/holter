apply plugin: 'java'
apply plugin: 'application'
apply plugin: 'gradle-one-jar'
//apply plugin: 'eclipse'

sourceCompatibility = '1.7'
targetCompatibility = '1.7'

[compileJava, compileTestJava]*.options*.encoding = 'UTF-8'

mainClassName = 'com.sergeytimanin.holter.JmxClientApplication'

group = 'com.sergeytimanin'
//name = 'holter'
version = '0.2'

buildscript {
	repositories {
		mavenCentral()
	}

	dependencies {
		classpath 'com.github.rholder:gradle-one-jar:1.0.3'
	}
}

project.ext {
    dropwizardVersion = '0.7.0'
}

task fatJar(type: OneJar) {
	mainClass = mainClassName
}

repositories {
    mavenCentral()
}

dependencies {
    compile group: 'io.dropwizard', name: 'dropwizard-core', version: dropwizardVersion
//    testCompile group: 'junit', name: 'junit', version: '4.+'
}

test {
    systemProperties 'property': 'value'
}

// not essential:
//uploadArchives {
//    repositories {
//       flatDir {
//           dirs 'repos'
//       }
//    }
//}

// not essential:
//run {
//	args 'server', 'src/dist/settings.yml'
//}

task wrapper(type: Wrapper) {
	gradleVersion = '1.12'
}

def configFile = file('src/dist/settings.yml')
def scriptFile = file('src/dist/start.sh')

artifacts {
	archives fatJar
	archives configFile
	archives scriptFile
}

// not essential:
//applicationDistribution.from("src/dist/") {
//    into "conf"
//}
